(this["webpackJsonptest-fun-box"]=this["webpackJsonptest-fun-box"]||[]).push([[0],{15:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),c=n(9),a=n.n(c),i=(n(15),n(10)),s=n(2),u=n(1),d=function(t){var e=Object(o.useState)(""),n=Object(s.a)(e,2),r=n[0],c=n[1];return Object(u.jsx)("article",{className:"container",children:Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),c(""),t.onAdd({_id:Date.now(),order:Date.now(),name:r,coords:t.coords})},className:"form",name:"addPointForm",children:Object(u.jsx)("input",{value:r,onChange:function(t){c(t.target.value)},type:"text",className:"form__input",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0432\u0430\u0448\u0435\u0439 \u0442\u043e\u0447\u043a\u0438"})})})},l=n(6),j=n(3),b=function(t){var e=t.point,n=Object(j.a)(t,["point"]);if(!e)return null;return Object(u.jsxs)("li",{className:"list__item point",draggable:!0,onDragStart:function(t){return n.start(t,e)},onDragLeave:function(t){return n.end(t)},onDragEnd:function(t){return n.end(t)},onDragOver:function(t){return n.over(t)},onDrop:function(t){return n.drop(t,e)},children:[e.name,Object(u.jsx)("button",{className:"point__delete-button button",onClick:function(){n.onDelete(e._id)}})]})},p=function(t){var e=t.points,n=Object(j.a)(t,["points"]),r=Object(o.useState)({}),c=Object(s.a)(r,2),a=c[0],i=c[1];if(!e)return null;var d=function(t,e){i(e)},p=function(t){t.target.classList.remove("list__item_hovered_true")},f=function(t){t.preventDefault(),t.target.classList.add("list__item_hovered_true")},O=function(t,o){t.preventDefault(),n.onOrderChange(e.map((function(t){return t._id===o._id?Object(l.a)(Object(l.a)({},t),{},{order:a.order}):t._id===a._id?Object(l.a)(Object(l.a)({},t),{},{order:o.order}):t}))),t.target.classList.remove("list__item_hovered_true")};return Object(u.jsx)("article",{className:"container",children:Object(u.jsx)("ul",{className:"list list__points",children:e.sort((function(t,e){return t.order-e.order})).map((function(t){return Object(u.jsx)(b,{point:t,onDelete:n.onDelete,start:d,end:p,over:f,drop:O},t._id)}))})})},f=function(t){return Object(u.jsxs)("section",{className:"interface ".concat(t.popupIsOpen&&"interface_visibility_visible"),children:[Object(u.jsx)(d,{onAdd:t.onAddPoint,coords:t.coords}),Object(u.jsx)(p,{points:t.points,onDelete:t.onDeletePoint,onOrderChange:t.onChangePoints})]})},O=n(4),m=function(t){var e=t.coords,n=Object(j.a)(t,["coords"]),r=Object(o.useState)(null),c=Object(s.a)(r,2),a=c[0],i=c[1];return Object(u.jsxs)(O.a,{state:{center:e,zoom:10,controls:["zoomControl"]},modules:["control.ZoomControl"],instanceRef:function(t){return i(t)},className:"map__container map container",onBoundsChange:function(){n.setCoords(a.getCenter())},children:[n.points.map((function(t){return Object(u.jsx)(O.b,{defaultGeometry:t.coords,options:{draggable:!0},properties:{balloonContent:t.name},onDragEnd:function(e){t.coords=e.get("target").geometry.getCoordinates(),n.onCoordsChange(t)}},t._id)})),Object(u.jsx)(O.c,{geometry:n.points.map((function(t){return t.coords}))})]})},_=function(){var t=Object(o.useState)([]),e=Object(s.a)(t,2),n=e[0],r=e[1],c=Object(o.useState)([55.76,37.64]),a=Object(s.a)(c,2),d=a[0],l=a[1],j=Object(o.useState)(!1),b=Object(s.a)(j,2),p=b[0],_=b[1];return Object(u.jsx)(O.d,{query:{ns:"use-load-option",load:"Map,Placemark,control.ZoomControl,geoObject.addon.balloon"},children:Object(u.jsx)("div",{className:"root",children:Object(u.jsxs)("main",{className:"page",children:[Object(u.jsx)(f,{points:n,onAddPoint:function(t){r([].concat(Object(i.a)(n),[t]))},onDeletePoint:function(t){r((function(e){return e.filter((function(e){return e._id===t?e.remove:e}))}))},onChangePoints:r,coords:d,popupIsOpen:p}),Object(u.jsx)(m,{points:n,coords:d,setCoords:l,onCoordsChange:function(t){r((function(e){return e.map((function(e){return e._id===t._id?t:e}))}))}}),Object(u.jsx)("div",{className:"popup ".concat(p&&"popup_open")}),Object(u.jsx)("button",{onClick:function(){_(!p),console.log("click")},className:"button popup__button ".concat(p&&"popup__button_active"),type:"button"})]})})})};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.503a6967.chunk.js.map